<?xml version="1.0" encoding="utf-8"?>
<odoo>

<record id="onsp_pos_categ_product_template_action" model="ir.actions.server">
    <field name="name">Update POS category</field>
    <field name="model_id" ref="product.model_product_template"/>
    <field name="state">code</field>
    <field name="code"><![CDATA[
for product in records:
    pos_categ_id = env['pos.category'].search([('onsp_internal_categ_id', '=', product.categ_id.id)])
    if pos_categ_id:
        product.write({'pos_categ_id': pos_categ_id.id})
    ]]></field>
</record>

</odoo>