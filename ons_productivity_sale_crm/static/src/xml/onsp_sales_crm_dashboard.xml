<?xml version="1.0" encoding="UTF-8"?>
<templates>
    <!--
        This template is the ribbon at the top of the salesteam dashboard that adds
        some figures to it. We call this rubbon the "SalesDashboard".
    -->
    <t t-name="ons_productivity_sale_crm.OnspSalesDashboard">
        <div class="o_kanban_dashboard o_salesteam_kanban oe_background_grey o_kanban_view ">
        <div t-if="show_demo or values" class="o_sales_dashboard">
            <div>
                <table class="table table-condensed">
                    <tr>
                        <td class="o_text">
                            <div class="o_highlight">To do</div>
                            Today
                        </td>
                        <td class="o_main" title="To Calendar">
                            <a href="#" class="o_dashboard_action" name="calendar.action_calendar_event">
                                <span class="o_highlight">
                                    <t t-esc="values['meeting']['today']"/>
                                </span><br/>
                                Meetings
                            </a>
                        </td>
                        <td class="o_main" title="To Activities">
                            <a href="#" class="o_dashboard_action" name="crm.crm_lead_action_activities" data-extra="today">
                                <span class="o_highlight">
                                    <t t-esc="values['activity']['today']"/>
                                </span><br/>
                                Next Actions
                            </a>
                        </td>
                        <td class="o_main" title="Other Pipelines" rowspan="2">
                            <a href="#" class="o_dashboard_action" name="ons_productivity_sale_crm.action_open_pipeline_dashboard">
                                <span class="fa fa-th-large fa-3x"/><br/>
                                Other Pipelines
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="o_text">Next 7 days</td>
                        <td class="o_main" title="To Calendar">
                            <a href="#" class="o_dashboard_action" name="calendar.action_calendar_event">
                                <t t-esc="values['meeting']['next_7_days']"/>
                            </a>
                        </td>
                        <td class="o_main" title="To Activities">
                            <a href="#" class="o_dashboard_action" name="crm.crm_lead_action_activities" data-extra="this_week">
                                <t t-esc="values['activity']['next_7_days']"/>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <!-- Hide overdue when there is none -->
                        <td t-if="show_demo or (values and values['activity']['overdue'] != 0)" class="o_warning" title="To Activities">
                            <a href="#" class="o_dashboard_action" name="crm.crm_lead_action_activities" data-extra="overdue">
                                <t t-esc="values['activity']['overdue']"/> overdue
                            </a>
                        </td>
                        <td  t-if="show_demo or (values and values['closing']['overdue'] != 0)" class="o_warning" title="To Opportunities">
                            <a href="#" class="o_dashboard_action" name="crm.action_your_pipeline" data-extra="overdue">
                                <t t-esc="values['closing']['overdue']"/> exp. closing
                            </a>
                        </td>
                    </tr>
                </table>
            </div><div>
                <table class="hidden-xs table table-condensed">
                    <tr>
                        <td class="o_text">
                            <div class="o_highlight">Performance</div>
                            This Month
                        </td>
                        <td class="o_secondary" title="Invoiced this month">
                            <a href="#" class="o_dashboard_action" name="ons_productivity_sale_crm.action_dashboard_open_invoices_list" data-extra="month">
                                <span class="o_highlight">
                                    <t t-esc="widget.render_monetary_field(values['invoiced']['month'], values['currency_id'])"/>
                                </span><br/>
                                Invoiced this month
                            </a>
                        </td>
                        <td class="o_secondary" title="Invoiced this year">
                            <a href="#" class="o_dashboard_action" name="ons_productivity_sale_crm.action_dashboard_open_invoices_list" data-extra="year">
                                <span class="o_highlight">
                                    <t t-esc="widget.render_monetary_field(values['invoiced']['year'], values['currency_id'])"/>
                                </span><br/>
                                Invoiced this year
                            </a>
                        </td>
                        <td class="o_secondary" title="Planned">
                            <a href="#" class="o_dashboard_action" name="ons_productivity_sale_crm.action_dashboard_open_invoices_list" data-extra="plan">
                                <span class="o_highlight">
                                    <t t-esc="widget.render_monetary_field(values['planned']['year'], values['currency_id'])"/>
                                </span><br/>
                                Yearly plan
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="o_text">
                            Pro rata temporis Objectif
                        </td>
                        <td class="o_secondary" title="Planned this month" >
                            <t t-esc="widget.render_monetary_field(values['planned']['month'], values['currency_id'])"/>
                        </td>
                        <td class="o_secondary" title="Planned this month">
                            <t t-esc="widget.render_monetary_field(values['planned']['daily'], values['currency_id'])"/>
                        </td>
                        <td class="o_secondary">
                        </td>
                    </tr>
                    <tr>
                        <td class="o_text">
                            Difference (%)
                        </td>
                        <td class="o_secondary" t-attf-style="color:#{values and values['percent']['month'] and values['percent']['month'] >= 0 ? 'green;' : 'red;'}">
                            <t t-esc="values['percent']['month']"/>
                        </td>
                        <td class="o_secondary" t-attf-style="color:#{values and values['percent']['daily'] and values['percent']['daily'] >= 0 ? 'green;' : 'red;'}">
                            <t t-esc="values['percent']['daily']"/>
                        </td>
                        <td class="o_secondary">
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        </div>
    </t>
</templates>
